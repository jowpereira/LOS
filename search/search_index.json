{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"LOS \u2014 Language for Optimization Specification","text":"<p>LOS is a Language for Optimization Specification. It compiles human-readable model definitions into executable Python code (currently using PuLP as the primary engine), keeping your business logic clean and your data pipeline separate.</p> <p>\"Write Math, Run Python.\"</p>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install los-lang\n</code></pre> <p>Or install from source:</p> <pre><code>git clone https://github.com/jowpereira/los.git\ncd los\npip install -e .\n</code></pre>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#1-write-a-model-productionlos","title":"1. Write a Model (<code>production.los</code>)","text":"<pre><code>import \"products.csv\"\nimport \"factories.csv\"\n\nset Products\nset Factories\n\nparam Cost[Products]\nparam Capacity[Factories]\n\nvar qty[Products, Factories] &gt;= 0\n\nminimize:\n    sum(qty[p,f] * Cost[p] for p in Products, f in Factories)\n\nsubject to:\n    capacity_limit:\n        sum(qty[p,f] for p in Products) &lt;= Capacity[f]\n        for f in Factories\n</code></pre>"},{"location":"#2-prepare-data","title":"2. Prepare Data","text":"<p><code>products.csv</code></p> <pre><code>Products,Cost\nWidgetA,10\nWidgetB,15\n</code></pre> <p><code>factories.csv</code></p> <pre><code>Factories,Capacity\nFactory1,1000\nFactory2,2000\n</code></pre>"},{"location":"#3-solve-solvepy","title":"3. Solve (<code>solve.py</code>)","text":"<pre><code>import los\n\nresult = los.solve(\"production.los\")\n\nif result.is_optimal:\n    print(f\"Optimal Cost: {result.objective}\")\n    print(result.get_variable(\"qty\", as_df=True))\n</code></pre>"},{"location":"#why-los","title":"Why LOS?","text":"Feature LOS Raw PuLP/Pyomo Readability Whiteboard-like syntax Python boilerplate Data Binding Native CSV imports Manual DataFrame wrangling Security Sandboxed execution Full Python access Debug Inspect generated code (<code>model.code()</code> or <code>model.export_python()</code>) Black box Solver CBC, GLPK, Gurobi, CPLEX (via PuLP) Same Backends PuLP (Pyomo planned) N/A"},{"location":"#advanced-manual-data-binding","title":"Advanced: Manual Data Binding","text":"<p>For dynamic data (APIs, databases), inject DataFrames directly:</p> <pre><code>import los\nimport pandas as pd\n\ndf = pd.DataFrame({\"Products\": [\"A\", \"B\"], \"Cost\": [10, 20]})\n\nresult = los.solve(\"model.los\", data={\"Products\": df})\n</code></pre>"},{"location":"#documentation","title":"Documentation","text":"Document Description User Manual Full syntax reference and API guide Security Policy Sandbox details and threat model Changelog Version history Backlog Roadmap and future features Contributing How to contribute"},{"location":"#license","title":"License","text":"<p>MIT \u00a9 Jonathan Pereira</p>"},{"location":"backlog/","title":"\ud83d\udccb LOS Roadmap &amp; Backlog","text":"<p>Language for Optimization Specification (LOS) project roadmap. This document outlines the planned features, optimizations, and community goals for future releases.</p>"},{"location":"backlog/#1-core-parser-improvements","title":"1. Core &amp; Parser Improvements","text":"<ul> <li>Matrix-Based Expansion: Direct generation of CSR/CSC sparse matrices to bypass PuLP's object-heavy instantiation for large-scale models.</li> <li>Syntax Error Precision: Improve <code>Lark</code> transformer to provide line/column numbers and \"Did you mean?\" suggestions for identifier typos.</li> <li>Internal Data Structures: Refactor AST representation for faster data binding during large-scale model expansion.</li> <li>Robust String Support: Enable usage of strings as parameters and indexed keys beyond basic labels.</li> </ul>"},{"location":"backlog/#2-solvers-backends","title":"2. Solvers &amp; Backends","text":"<ul> <li>Pyomo Support: Implement <code>PyomoTranslator</code> to enable Non-Linear Programming (NLP) and a wider range of academic solvers.</li> <li>Gurobi Direct Adapter: Implement a specialized adapter for Gurobi to leverage its C-API performance without intermediate Python overhead.</li> <li>SciPy/NumPy Integration: Support for small-scale standard problems without external system dependencies.</li> </ul>"},{"location":"backlog/#3-tooling-ecosystem","title":"3. Tooling &amp; Ecosystem","text":"<ul> <li>VS Code Extension: Dedicated extension for <code>.los</code> files including syntax highlighting, bracket matching, and basic autocompletion.</li> <li>LOS CLI v2: Enhancing the command-line interface to support batch processing, report generation, and direct CSV exporting.</li> <li>Interactive Sandbox: Web-based LOS compiler (via Pyodide) for the project website.</li> </ul>"},{"location":"backlog/#4-documentation-research","title":"4. Documentation &amp; Research","text":"<ul> <li>Expansion Benchmarks: Automated performance testing suite against AMPL, GAMS, and Pyomo.</li> <li>Real-World Case Studies: Industry-standard examples for Supply Chain, Route Optimization, and Production Planning.</li> <li>Mathematical Proofs: Formal documentation of the LOS-to-MILP translation and mapping logic.</li> </ul>"},{"location":"backlog/#5-stability-maintenance","title":"5. Stability &amp; Maintenance","text":"<ul> <li>Type Hinting: Achieve full Mypy compliance across the core codebase (<code>los/</code>).</li> <li>Multi-OS CI: GitHub Actions matrix for automated testing on Windows, Linux, and macOS.</li> <li>Standard Library Tests: Comprehensive test suite for mathematical function correctness (<code>sum</code>, <code>log</code>, <code>min</code>, <code>max</code>).</li> </ul> <p>[!TIP] Features are prioritized based on community feedback. Feel free to open an Issue or a Discussion on GitHub!</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#v336-stable-data-binding","title":"v3.3.6 - Stable Data Binding","text":""},{"location":"changelog/#bug-fixes","title":"\ud83d\udc1b Bug Fixes","text":"<ul> <li>[FIX] <code>DataBindingService</code>: Implemented fuzzy column matching (case-insensitive + whitespace stripping) to correctly load multi-indexed parameters from CSVs even when column names differ slightly (e.g., <code>Stock</code> vs <code>Stock</code>).</li> <li>[FIX] <code>CSV Loading</code>: Prevents flat loading of multi-index parameters when column names have case or whitespace mismatches.</li> </ul>"},{"location":"changelog/#v335-documentation-roadmap","title":"v3.3.5 - Documentation &amp; Roadmap","text":""},{"location":"changelog/#documentation","title":"\ud83d\udcda Documentation","text":"<ul> <li>[ADD] <code>BACKLOG.md</code>: Added standardized project roadmap and future features list.</li> <li>[CHG] <code>README.md</code>: Clarified current support for PuLP and future plans for Pyomo.</li> <li>[CHG] <code>Manual</code>: Updated versioning and minor corrections.</li> </ul>"},{"location":"changelog/#v334-stability-fix","title":"v3.3.4 - Stability Fix","text":""},{"location":"changelog/#bug-fixes_1","title":"\ud83d\udc1b Bug Fixes","text":"<ul> <li>[FIX] <code>PuLPTranslator</code>: Resolved <code>NameError: name 'inner' is not defined</code> when translating indexed parameters with default values.</li> <li>[FIX] <code>Nested Dicts</code>: Corrected the internal logic for nested dictionary comprehension generation.</li> </ul>"},{"location":"changelog/#v333-branding-correction","title":"v3.3.3 - Branding Correction","text":""},{"location":"changelog/#naming-messaging","title":"\ud83c\udff7\ufe0f Naming &amp; Messaging","text":"<ul> <li>[FIX] <code>Terminology</code>: Corrected project expansion to Language for Optimization Specification (was previously \"Linear Optimization Specification\" in some docs).</li> <li>[CHG] <code>PyPI Republish</code>: Re-published as v3.3.3 to propagate description changes to PyPI index.</li> </ul>"},{"location":"changelog/#v332-pypi-re-publish-metadata-update","title":"v3.3.2 - PyPI Re-publish &amp; Metadata Update","text":""},{"location":"changelog/#package-distribution","title":"\ud83d\udce6 Package &amp; Distribution","text":"<ul> <li>[CHG] <code>PyPI Republish</code>: Re-published as <code>los-lang</code> v3.3.2 (v3.3.1 filename was consumed by prior deletion; PyPI does not allow filename reuse).</li> <li>[CHG] <code>Keywords</code>: Broadened from \"linear-programming\" to \"mathematical-optimization\", \"operations-research\", \"modeling-language\", \"mixed-integer-programming\".</li> <li>[CHG] <code>README</code>: Updated installation instructions (<code>pip install los-lang</code>), repository URLs, and project title to \"Mathematical Optimization Specification\".</li> <li>[CHG] <code>Description</code>: Scope clarified as \"Mathematical Optimization\" (not limited to Linear Programming).</li> </ul>"},{"location":"changelog/#v331-mathematical-robustness-core-stability","title":"v3.3.1 - Mathematical Robustness &amp; Core Stability","text":""},{"location":"changelog/#parser-grammar","title":"\ud83d\udee1\ufe0f Parser &amp; Grammar","text":"<ul> <li>[FIX] <code>String Literals</code>: Implemented <code>ast.literal_eval</code> to correctly parse escaped characters (e.g., Windows paths <code>C:\\\\Path</code>, nested quotes <code>\\\"</code>).</li> <li>[FIX] <code>Grammar</code>: Updated <code>STRING</code> regex to support escaped quotes, preventing syntax errors in complex string payloads.</li> <li>[FIX] <code>Indexed Variables</code>: Refactored <code>indexed_var</code> to preserve AST nodes for indices, fixing bug where indices were rendered as raw string dictionaries (e.g., <code>x[{'type': 'number'...}]</code> \u2192 <code>x[1]</code>).</li> </ul>"},{"location":"changelog/#mathematical-translation","title":"\ud83e\uddee Mathematical Translation","text":"<ul> <li>[FIX] <code>Power Operator</code>: Mapped <code>^</code> token directly to Python's <code>**</code> operator (exponentiation) instead of bitwise XOR.</li> <li>[FEAT] <code>Relational Operators</code>: Enabled usage of <code>!=</code>, <code>&lt;</code>, <code>&gt;</code> within logical contexts (filters/<code>if</code>), mapping them to valid Python operators.</li> <li>[FIX] <code>Set Binding</code>: Translator now generates guarded code (<code>if name is None:</code>) for Set initialization, ensuring overrides from <code>_los_data</code> are respected and not overwritten by CSV defaults.</li> </ul>"},{"location":"changelog/#data-binding-integrity","title":"\ud83d\udd27 Data Binding &amp; Integrity","text":"<ul> <li>[FIX] <code>Heuristic Matching</code>: <code>DataBindingService</code> now rejects DataFrames that have zero intersection with the target parameter's index, preventing incorrect data injection from unrelated CSVs.</li> <li>[SEC] <code>Sandbox Safety</code>: Removed dangerous <code>locals()</code> usage in generated code for Set/Param binding, using explicit multi-step assignment logic.</li> </ul>"},{"location":"changelog/#v330-supply-chain-core-stability-dx-phase-3-35","title":"v3.3.0 - Supply Chain Core Stability &amp; DX (Phase 3 &amp; 3.5)","text":""},{"location":"changelog/#developer-experience-dx","title":"\u2728 Developer Experience (DX)","text":"<ul> <li>[ADD] <code>LOSResult.get_variable(name, as_df=True)</code>: Returns structured Pandas DataFrames (MultiIndex) for optimization variables. Replaces manual string parsing.</li> <li>[ADD] <code>tests/validate_supply_chain_results.py</code>: Independent cross-validation script for auditing solver results against raw CSV data.</li> </ul>"},{"location":"changelog/#robustness-fixes","title":"\ud83d\udee1\ufe0f Robustness &amp; Fixes","text":"<ul> <li>[FIX] <code>DataBindingService</code>: Resolved silent failure when <code>cap_rota</code> column was missing (Created <code>bases_exemplos/cap_rota.csv</code>).</li> <li>[FIX] <code>LOSModel.solve()</code>: Now safely captures objective value for non-optimal statuses (e.g., Infeasible with partial bound) instead of returning <code>None</code>.</li> <li>[FIX] <code>bases_exemplos/*.csv</code>: Renamed headers (<code>Planta</code>\u2192<code>Plantas</code>, <code>Produto</code>\u2192<code>Produtos</code>) to strictly match Model Sets.</li> <li>[CHG] <code>bases_exemplos/cap_rota.csv</code>: Relaxed capacity constraints (10x) to ensure feasibility in standard tests.</li> </ul>"},{"location":"changelog/#performance","title":"\u26a1 Performance","text":"<ul> <li>[AUDIT] <code>PuLPTranslator</code>: Confirmed use of generator expressions in <code>lpSum</code> (O(1) memory overhead) vs list comprehensions.</li> </ul>"},{"location":"changelog/#v322-data-binding-phase-2","title":"v3.2.2 - Data Binding (Phase 2)","text":""},{"location":"changelog/#features","title":"Features","text":"<ul> <li>Data Binding: <code>los.solve(source, data=...)</code> agora aceita dicion\u00e1rios, DataFrames e Series.</li> <li>Auto-Alignment: Par\u00e2metros indexados (e.g. <code>param p[i,j]</code>) automapeiam DataFrames com MultiIndex correto.</li> <li>E2E Demo: Novo exemplo <code>examples/run_supply_chain.py</code> demonstrando inje\u00e7\u00e3o de dados reais.</li> </ul>"},{"location":"changelog/#fixes","title":"Fixes","text":"<ul> <li>Set Literals: Corrigido erro <code>NameError</code> ao usar membros de set (ex: <code>A</code> em <code>set S={A}</code>) em restri\u00e7\u00f5es. O tradutor agora gera defini\u00e7\u00f5es Python para literais.</li> <li>LOSResult: Corrigido atributo <code>solve_time</code> para <code>time</code>.</li> </ul>"},{"location":"changelog/#v321-public-api-core-fixes-phase-1fixes","title":"v3.2.1 - Public API &amp; Core Fixes (Phase 1)Fixes","text":""},{"location":"changelog/#critical-bug-fixes","title":"\ud83d\udc1b Critical Bug Fixes","text":"<ul> <li>[FIX] <code>PuLPTranslator._visit_constraint</code>: Agor gera loops aninhados (<code>for x in S: for y in T:</code>) em vez de sintaxe inv\u00e1lida, e anexa \u00edndices ao nome da restri\u00e7\u00e3o (<code>r1_P1_C1</code>).</li> <li>[FIX] <code>PuLPTranslator._visit_param</code>: Corrigida gera\u00e7\u00e3o de dicion\u00e1rios para m\u00faltiplos \u00edndices (<code>{i: {j: val}}</code>) compat\u00edvel com <code>LpVariable.dicts</code>.</li> <li>[FIX] <code>LOSModel.solve()</code>: Trata retorno <code>None</code> do <code>pulp.value(objective)</code> em problemas de viabilidade/custo zero (assume 0.0).</li> </ul>"},{"location":"changelog/#validacao-final","title":"\ud83d\udcca Valida\u00e7\u00e3o Final","text":"<ul> <li>Modelo <code>supply_chain_network.los</code> resolvido com sucesso!</li> <li>116 restri\u00e7\u00f5es, 225 vari\u00e1veis, 444 elementos</li> <li>Tempo de resolu\u00e7\u00e3o: 0.02s (CBC)</li> <li>Status: Optimal, Objective: 0.0</li> </ul>"},{"location":"changelog/#320-public-api-a01-a04","title":"[3.2.0] \u2014 Public API (A01-A04)","text":""},{"location":"changelog/#new-public-api","title":"\u2728 New Public API","text":"<ul> <li>[ADD] <code>los.compile(source)</code> \u2014 compila texto LOS ou arquivo <code>.los</code> \u2192 <code>LOSModel</code> (A01)</li> <li>[ADD] <code>LOSModel.solve(backend, time_limit, msg)</code> \u2014 executa modelo e retorna <code>LOSResult</code> (A02)</li> <li>[ADD] <code>LOSResult</code> \u2014 <code>.status</code>, <code>.objective</code>, <code>.variables</code>, <code>.time</code>, <code>.is_optimal</code>, <code>.non_zero_variables</code> (A03)</li> <li>[ADD] <code>los.solve(source)</code> \u2014 atalho compile + solve (A04)</li> </ul>"},{"location":"changelog/#new-files","title":"\ud83c\udfd7\ufe0f New Files","text":"<ul> <li>[ADD] <code>los/domain/entities/los_model.py</code> \u2014 LOSModel entity</li> <li>[ADD] <code>los/domain/entities/los_result.py</code> \u2014 LOSResult entity</li> <li>[ADD] <code>los/application/compiler.py</code> \u2014 pipeline parse\u2192translate\u2192model</li> <li>[ADD] <code>tests/test_public_api.py</code> \u2014 28 testes (7 compile, 8 solve, 9 result, 4 shortcut)</li> </ul>"},{"location":"changelog/#bug-fix","title":"\ud83d\udc1b Bug Fix","text":"<ul> <li>[FIX] <code>_resolve_source</code> \u2014 multi-line text com <code>\\n</code> causava crash no <code>Path.exists()</code> no Windows</li> </ul>"},{"location":"changelog/#resultados","title":"\ud83d\udcca Resultados","text":"<ul> <li>158 testes passando (28 novos + 130 existentes)</li> <li>Zero regress\u00f5es</li> <li>API testada com min/max/binary/bounded LPs e arquivo <code>.los</code> complexo</li> </ul>"},{"location":"changelog/#311-supply-chain-e2e-integration","title":"[3.1.1] \u2014 Supply Chain E2E Integration","text":""},{"location":"changelog/#features_1","title":"\u2728 Features","text":"<ul> <li>[ADD] Modelo complexo <code>modelos/supply_chain_network.los</code> \u2014 Supply Chain Network Design com 4 plantas \u00d7 6 produtos \u00d7 8 clientes</li> <li>[ADD] 6 datasets CSV em <code>bases_exemplos/</code>: <code>plantas.csv</code>, <code>produtos_scm.csv</code>, <code>clientes_scm.csv</code>, <code>demanda.csv</code>, <code>custo_transporte.csv</code>, <code>capacidade_fabrica.csv</code></li> <li>[ADD] Teste E2E raiz <code>test_supply_chain_e2e.py</code> \u2014 30 testes (parsing, tradu\u00e7\u00e3o, dados, complexidade)</li> </ul>"},{"location":"changelog/#bug-found","title":"\ud83d\udc1b Bug Found","text":"<ul> <li>[BUG] Terminal <code>PROD</code> na gram\u00e1tica colide com identificadores que come\u00e7am com <code>prod</code> (ex: <code>producao</code>). Workaround: renomeado para <code>fabrica</code>. Fix permanente pendente para Phase 2.</li> </ul>"},{"location":"changelog/#resultados_1","title":"\ud83d\udcca Resultados","text":"<ul> <li>130 testes passando (100 existentes + 30 novos)</li> <li>Escala do modelo: 224 vari\u00e1veis, 116 restri\u00e7\u00f5es, comprehensions multi-index</li> </ul>"},{"location":"changelog/#310-deep-remediation-phase-15-16","title":"[3.1.0] \u2014 Deep Remediation (Phase 1.5 + 1.6)","text":""},{"location":"changelog/#critical-fixes-f01-f05","title":"\ud83d\udd34 Critical Fixes (F01-F05)","text":"<ul> <li>[FIX] <code>F01</code> Parser Transformer state leak \u2014 <code>_variables_registry</code> limpo a cada <code>parse()</code> call</li> <li>[FIX] <code>F02</code> Expression <code>__post_init__</code> removido \u2014 valida\u00e7\u00e3o via <code>validate()</code> expl\u00edcito</li> <li>[FIX] <code>F03</code> <code>translate_expression()</code> adicionado a <code>ITranslatorAdapter</code> (contrato ABC)</li> <li>[FIX] <code>F04</code> <code>_extract_expressions_from_content</code> \u2014 regex robusto substituiu heur\u00edstica fr\u00e1gil</li> <li>[FIX] <code>F05</code> <code>ComplexityMetrics</code> \u2014 contagem real de vari\u00e1veis/constraints/datasets</li> </ul>"},{"location":"changelog/#high-priority-fixes-f06-f10","title":"\ud83d\udfe0 High Priority Fixes (F06-F10)","text":"<ul> <li>[FIX] <code>F06</code> Translator detecta <code>LpMinimize</code>/<code>LpMaximize</code> da AST (n\u00e3o mais hardcoded)</li> <li>[FIX] <code>F07</code> <code>var</code> default <code>lowBound=0</code> documentado e corrigido</li> <li>[FIX] <code>F08</code> <code>_visit_import</code> sanitiza path, deriva nome vari\u00e1vel do filename (n\u00e3o <code>data</code>)</li> <li>[FIX] <code>F09</code> <code>func_call</code> parser reescrito para dispatch correto</li> <li>[FIX] <code>F10</code> <code>sum()</code> sem loop gera <code>lpSum</code> inline</li> </ul>"},{"location":"changelog/#medium-fixes-f11-f17","title":"\ud83d\udfe1 Medium Fixes (F11-F17)","text":"<ul> <li>[FIX] <code>F11</code> Dead code <code>to_pulp_code()</code> removido de <code>Expression</code></li> <li>[FIX] <code>F12</code> DTO <code>translate()</code> retorna guidance em vez de placeholder morto</li> <li>[FIX] <code>F13</code> <code>LOSError</code> n\u00e3o herda mais de <code>ABC</code></li> <li>[FIX] <code>F14</code> <code>ValidationRequestDTO.expression_text</code> default <code>\"\"</code> (n\u00e3o <code>None</code>)</li> <li>[FIX] <code>F15</code> <code>InMemoryExpressionRepository</code> implementado</li> <li>[FIX] <code>F16</code> <code>_sanitize_name</code> aplicado em loop variables</li> <li>[FIX] <code>F17</code> Regex <code>NUMBER</code> n\u00e3o captura negativo (handled by grammar subtraction)</li> </ul>"},{"location":"changelog/#low-fixes-f18-f19","title":"\ud83d\udfe2 Low Fixes (F18-F19)","text":"<ul> <li>[FIX] <code>F18</code> Suporte a <code>#</code> comments na gram\u00e1tica (SH_COMMENT)</li> <li>[FIX] <code>F19</code> <code>__version__ = \"3.1.0\"</code> em <code>LOSParser</code> e <code>PuLPTranslator</code></li> </ul>"},{"location":"changelog/#test-suite-overhaul","title":"\ud83e\uddea Test Suite Overhaul","text":"<ul> <li>[REWRITE] <code>test_expression_v3.py</code> \u2014 alinhado com API v3.1</li> <li>[REWRITE] <code>test_unit_modules.py</code> \u2014 351 linhas reescritas (construtores, DTOs, errors)</li> <li>[REWRITE] <code>test_los_dados_reais.py</code> \u2014 6 testes reescritos (sem <code>to_pulp_code</code>, sem <code>variables={}</code>)</li> <li>[FIX] <code>test_audit_remediation.py</code> \u2014 sanitization assertion corrigida</li> <li>[FIX] <code>test_integration_v3.py</code> \u2014 set quoting e objective format atualizados</li> <li>[FIX] <code>test_service_v3.py</code> \u2014 <code>pd.read_csv</code> assertion gen\u00e9rica</li> <li>[FIX] <code>test_architecture_validation.py</code> \u2014 threshold de m\u00e9todos ajustado (10\u219215)</li> </ul>"},{"location":"changelog/#resultados_2","title":"\ud83d\udcca Resultados","text":"<ul> <li>100/100 testes passando</li> <li>19 findings remediados (5 Critical, 5 High, 7 Medium, 2 Low)</li> <li>Zero regress\u00f5es</li> </ul>"},{"location":"changelog/#analise-completa-e-atualizacao-da-lib-los","title":"An\u00e1lise Completa e Atualiza\u00e7\u00e3o da LIB LOS","text":""},{"location":"changelog/#core-architecture","title":"\ud83c\udfd7\ufe0f Core &amp; Architecture","text":"<ul> <li>Clean Architecture Compliance: Mapeamento completo e documentado das camadas:</li> <li><code>Domain</code>: Entidades e regras de neg\u00f3cio puras (ex: <code>Expression</code>, <code>Variable</code>).</li> <li><code>Application</code>: Casos de uso e orquestra\u00e7\u00e3o.</li> <li><code>Infrastructure</code>: Implementa\u00e7\u00f5es concretas e persist\u00eancia.</li> <li><code>Adapters</code>: Interfaces externas e tradutores.</li> <li>Novos Componentes Core:</li> <li><code>Expression</code> &amp; <code>Variable</code>: Primitivas fundamentais para modelagem de problemas.</li> <li><code>DatasetReference</code>: Gerenciamento desacoplado de fontes de dados.</li> <li><code>ComplexityMetrics</code>: An\u00e1lise de viabilidade computacional.</li> <li>Implementa\u00e7\u00e3o T\u00e9cnica:</li> <li><code>LOSParser</code>: Implementa\u00e7\u00e3o robusta baseada em Lark para parsing de gram\u00e1tica personalizada.</li> <li><code>PuLPTranslator</code>: Camada de tradu\u00e7\u00e3o otimizada para solvers lineares.</li> <li>Hierarquia de Exce\u00e7\u00f5es: Sistema tipado (<code>LOSError</code> &gt; <code>ParseError</code>, <code>ValidationError</code>) para tratamento granular de erros.</li> </ul>"},{"location":"changelog/#quality-assurance-qa-validacao","title":"\ud83e\uddea Quality Assurance (QA) &amp; Valida\u00e7\u00e3o","text":"<ul> <li>Suite de Testes Reais:</li> <li>Adi\u00e7\u00e3o de <code>tests/test_los_dados_reais.py</code> com 10 cen\u00e1rios baseados em dados de produ\u00e7\u00e3o (<code>bases_exemplos</code>).</li> <li>Cobertura de testes de integra\u00e7\u00e3o: 17/17 testes automatizados passando.</li> <li>Corre\u00e7\u00f5es Cr\u00edticas:</li> <li>Parser: Corre\u00e7\u00e3o de sintaxe <code>PARA EACH</code> \u2192 <code>PARA CADA</code> para conformidade com a gram\u00e1tica PT-BR.</li> <li>Validador Matem\u00e1tico: Garantia de consist\u00eancia em express\u00f5es complexas.</li> <li>Performance:</li> <li>\ud83d\ude80 Lat\u00eancia: Tempo m\u00e9dio de execu\u00e7\u00e3o otimizado para 13.9ms (target: &lt;25ms).</li> <li>Viabilidade: Script <code>check_viabilidade.py</code> validado para verifica\u00e7\u00e3o de restri\u00e7\u00f5es de capacidade.</li> </ul>"},{"location":"changelog/#developer-experience-dx_1","title":"\ud83d\udee0\ufe0f Developer Experience (DX)","text":"<ul> <li>Logging &amp; Observabilidade: Implementa\u00e7\u00e3o de sistema centralizado de logs com rota\u00e7\u00e3o e n\u00edveis sem\u00e2nticos.</li> <li>Interfaces:</li> <li>CLI Profissional: Interface de linha de comando com argumentos estruturados.</li> <li><code>FileProcessor</code>: Utilit\u00e1rio para batch processing de arquivos <code>.los</code>.</li> <li>Documenta\u00e7\u00e3o T\u00e9cnica:</li> <li>README principal expandido (1700+ linhas) com diagramas arquiteturais e exemplos de c\u00f3digo.</li> <li>Se\u00e7\u00e3o dedicada a Troubleshooting &amp; FAQ.</li> </ul>"},{"location":"contributing/","title":"Contributing to LOS","text":"<p>Thank you for your interest in contributing to LOS! This guide will help you get started.</p>"},{"location":"contributing/#development-setup","title":"Development Setup","text":"<pre><code># 1. Clone the repository\ngit clone https://github.com/jpereiramp/los-lang.git\ncd los-lang\n\n# 2. Create a virtual environment\npython -m venv .venv\nsource .venv/bin/activate  # Linux/macOS\n.venv\\Scripts\\activate     # Windows\n\n# 3. Install in editable mode with dev dependencies\npip install -e \".[dev]\"\n\n# 4. Run tests\npython run_tests.py\n</code></pre>"},{"location":"contributing/#how-to-contribute","title":"How to Contribute","text":""},{"location":"contributing/#reporting-bugs","title":"Reporting Bugs","text":"<ul> <li>Use GitHub Issues.</li> <li>Include a minimal <code>.los</code> model that reproduces the problem.</li> <li>Include the generated Python code (<code>model.code()</code>).</li> </ul>"},{"location":"contributing/#suggesting-features","title":"Suggesting Features","text":"<ul> <li>Open a Discussion first.</li> <li>Describe the use case, not just the solution.</li> </ul>"},{"location":"contributing/#submitting-code","title":"Submitting Code","text":"<ol> <li>Fork the repository.</li> <li>Create a feature branch (<code>git checkout -b feature/my-feature</code>).</li> <li>Write tests for your changes.</li> <li>Ensure all tests pass (<code>python run_tests.py</code>).</li> <li>Submit a Pull Request with a clear description.</li> </ol>"},{"location":"contributing/#code-style","title":"Code Style","text":"<ul> <li>Formatter: <code>black</code> (120 chars per line).</li> <li>Linter: <code>flake8</code>.</li> <li>Type hints: Encouraged on all public APIs.</li> </ul>"},{"location":"contributing/#architecture-overview","title":"Architecture Overview","text":"<pre><code>los/\n\u251c\u2500\u2500 domain/         # Entities, value objects (pure logic, no deps)\n\u251c\u2500\u2500 application/    # Use cases, compiler pipeline\n\u251c\u2500\u2500 infrastructure/ # Parser (Lark), Translator (PuLP), Validators\n\u251c\u2500\u2500 adapters/       # CLI, File processor\n\u2514\u2500\u2500 shared/         # Logging, error hierarchy\n</code></pre> <p>The compiler pipeline is: Parse \u2192 Bind Data \u2192 Translate \u2192 Execute.</p>"},{"location":"contributing/#commit-messages","title":"Commit Messages","text":"<p>Follow Conventional Commits: - <code>fix(parser): handle escaped quotes in strings</code> - <code>feat(translator): add support for != operator</code> - <code>docs: update README installation section</code> - <code>test: add regression test for indexed variables</code></p>"},{"location":"manual/","title":"\ud83d\udcd8 LOS User Manual v3.3.5","text":"<p>Language for Optimization Specification (LOS) is a domain-specific language for modeling mathematical optimization problems.</p> <p>This manual serves as the definitive reference for the LOS language syntax and Python API.</p>"},{"location":"manual/#1-syntax-overview","title":"1. Syntax Overview","text":"<p>Important Rules: 1.  Lowercase Keywords: LOS is strictly case-sensitive. Keywords like <code>set</code>, <code>var</code>, <code>minimize</code> must be lowercase. 2.  Comments: Use <code>#</code> for comments. 3.  Blocks: Indentation is not significant, but recommended for readability. Blocks (like constraints) use colons <code>:</code>.</p>"},{"location":"manual/#2-model-structure","title":"2. Model Structure","text":"<p>A valid LOS model consists of declarations in roughly this order:</p> <ol> <li>Imports (Data Sources)</li> <li>Sets (Indices)</li> <li>Parameters (Data)</li> <li>Variables (Decisions)</li> <li>Objective (Goal)</li> <li>Constraints (Rules)</li> </ol>"},{"location":"manual/#21-imports-the-power-way","title":"2.1 Imports (The Power Way)","text":"<p>Instead of passing data via Python, import it directly.</p> <pre><code>import \"data/products.csv\"\nimport \"data/factories.csv\"\n</code></pre> <p>The compiler will read the CSVs and make their columns available for Sets and Parameters.</p>"},{"location":"manual/#22-sets","title":"2.2 Sets","text":"<p>Sets define the dimensions of your problem.</p> <p>Syntax:</p> <pre><code># 1. Native Import (Recommended)\n# Automatically populated from the 'Products' column in any imported CSV.\nset Products\n\n# 2. Simple set literal\nset Colors = {\"Red\", \"Green\", \"Blue\"}\n\n# 3. Range set (inclusive)\nset Time = 1..12\n</code></pre>"},{"location":"manual/#23-parameters","title":"2.3 Parameters","text":"<p>Parameters hold the constant data values.</p> <p>Syntax:</p> <pre><code># 1. Native Import (Recommended)\n# Automatically populated from the 'Cost' column in any imported CSV.\n# Must declare index [Products] to validate size.\nparam Cost[Products]\n\n# 2. Scalar parameter\nparam MaxTotalCost = 1000\n\n# 3. Multi-index parameter (Matrix)\n# \"Distance from Factories to Customers\"\nparam Distance[Factories, Customers]\n</code></pre>"},{"location":"manual/#24-variables","title":"2.4 Variables","text":"<p>Variables are the decisions the solver will make.</p> <p>Syntax:</p> <pre><code># Continuous variable (default) with bounds\nvar qty[Products] &gt;= 0\n\n# Binary variable (0 or 1)\nvar is_active[Factories] bin\n\n# Integer variable\nvar workers[Time] int &gt;= 0\n</code></pre>"},{"location":"manual/#25-objective-function","title":"2.5 Objective Function","text":"<p>The goal to minimize or maximize. Note that the objective does not have a name.</p> <p>Syntax:</p> <pre><code># Minimize cost\n# Use iterators (p) inside the expression to reference indices\nminimize:\n    sum(qty[p] * Cost[p] for p in Products)\n</code></pre>"},{"location":"manual/#26-constraints","title":"2.6 Constraints","text":"<p>Rules that must be satisfied. Constraints are grouped in a <code>subject to:</code> (or <code>st:</code>) block.</p> <p>Syntax:</p> <pre><code>subject to:\n    # 1. Simple constraint\n    total_limit: sum(qty[p] for p in Products) &lt;= 1000\n\n    # 2. For-each constraint (indexed constraint)\n    # \"For each factory f, production &lt;= capacity\"\n    capacity_limit:\n        sum(qty[p, f] for p in Products) &lt;= Capacity[f]\n        for f in Factories\n</code></pre>"},{"location":"manual/#3-python-api-integration","title":"3. Python API Integration","text":""},{"location":"manual/#31-basic-usage","title":"3.1 Basic Usage","text":"<pre><code>import los\n\n# 1. Run model (data is loaded from imports inside .los)\nresult = los.solve(\"model.los\")\n\n# 2. Inspect\nif result.is_optimal:\n    print(f\"Objective: {result.objective}\")\n    print(result.get_variable(\"qty\", as_df=True))\n</code></pre>"},{"location":"manual/#32-exporting-to-standalone-python","title":"3.2 Exporting to Standalone Python","text":"<p>Sometimes you want to compile a <code>.los</code> model but run it elsewhere without needing the <code>los</code> compiler again. You can export the model to a complete, standalone Python script!</p> <pre><code>import los\n\n# 1. Compile model\nmodel = los.compile_model(\"model.los\")\n\n# 2. Export to a ready-to-use Python script\nmodel.export_python(\"my_solver_script.py\")\n</code></pre> <p>This generates a standalone <code>.py</code> file that includes all required imports, the native PuLP model code, the solver trigger (<code>prob.solve()</code>), and print statements for the results. You can run this generated script in any Python environment where <code>pulp</code> and <code>pandas</code> are installed.</p>"},{"location":"manual/#33-advanced-manual-data-binding","title":"3.3 Advanced: Manual Data Binding","text":"<p>If you are building a web app or generating data on the fly in Python, you can inject DataFrames manually. This overrides imported data.</p> <pre><code>import los\nimport pandas as pd\n\n# DataFrames\ndf_data = pd.DataFrame({'Products': ['A', 'B'], 'Cost': [10, 20]})\n\n# Inject 'Products' Set and 'Cost' Param from this DataFrame\nresult = los.solve(\"model.los\", data={'Products': df_data})\n</code></pre>"},{"location":"manual/#4-security","title":"4. Security","text":"<p>LOS runs generated code in a Sandboxed Environment. *   Blocked: <code>open</code>, <code>__import__</code>, <code>eval</code>, <code>exec</code>. *   Allowed: Math functions, <code>pulp</code>, <code>pandas</code>, <code>numpy</code>.</p> <p>See SECURITY.md for details.</p>"},{"location":"manual/#5-troubleshooting-common-errors","title":"5. Troubleshooting Common Errors","text":""},{"location":"manual/#parseerror-unexpected-token","title":"<code>ParseError: Unexpected token ...</code>","text":"<ul> <li>Check Case: Did you write <code>SET</code> instead of <code>set</code>?</li> <li>Check Brackets: Sets use <code>{}</code>, Lists/Indices use <code>[]</code>.</li> </ul>"},{"location":"manual/#keyerror-x","title":"<code>KeyError: 'X'</code>","text":"<ul> <li>Check Data: A Param <code>X</code> was declared but not found in any imported CSV or provided DataFrame. Column names must match exactly.</li> </ul>"},{"location":"security/","title":"Security Policy","text":"<p>This document describes the security model and protections implemented in the LOS compiler.</p>"},{"location":"security/#threat-model","title":"Threat Model","text":"<p>LOS works as a transpiler: it converts <code>.los</code> code (safe by design) into Python code (powerful and potentially dangerous).</p> <p>The primary attack vector is Code Injection (RCE) through: 1. Malicious strings attempting to escape quotes in generated code. 2. Unauthorized function calls (e.g., <code>__import__('os')</code>) injected as expressions.</p>"},{"location":"security/#mitigations","title":"Mitigations","text":""},{"location":"security/#1-execution-sandbox-los_modelpy","title":"1. Execution Sandbox (<code>los_model.py</code>)","text":"<p>All generated code runs inside a restricted <code>exec()</code> environment: - Builtins disabled: <code>open</code>, <code>__import__</code>, <code>eval</code>, <code>exec</code>, and all dangerous builtins are blocked. - Strict whitelist: Only math and optimization libraries are allowed: <code>pulp</code>, <code>pandas</code>, <code>numpy</code>, <code>math</code>. - Safe builtins: Only <code>range</code>, <code>list</code>, <code>set</code>, <code>dict</code>, <code>tuple</code>, <code>len</code>, <code>sum</code>, <code>min</code>, <code>max</code>, <code>abs</code>, <code>round</code>, <code>sorted</code>, <code>enumerate</code>, <code>zip</code>, <code>int</code>, <code>float</code>, <code>str</code>, <code>bool</code>, <code>print</code>.</p>"},{"location":"security/#2-string-escaping-pulp_translatorpy","title":"2. String Escaping (<code>pulp_translator.py</code>)","text":"<p>All string literals from the LOS model are processed with <code>repr()</code> during translation, ensuring that escape characters (<code>'</code>, <code>\"</code>, <code>\\</code>) are neutralized correctly.</p>"},{"location":"security/#3-name-sanitization","title":"3. Name Sanitization","text":"<p>All identifiers (variable names, set names, parameter names) are sanitized with <code>re.sub(r'[^a-zA-Z0-9_]', '', name)</code>, preventing any special characters from reaching the generated code.</p>"},{"location":"security/#limitations","title":"Limitations","text":"<ul> <li>Untrusted input: Although the sandbox is hardened, never execute LOS models from unknown or untrusted sources without prior audit. New sandbox bypass techniques may emerge.</li> <li>DoS (Denial of Service): Models can still consume excessive resources (CPU/RAM) with large loops or matrices. Use <code>time_limit</code> on the solver.</li> </ul>"},{"location":"security/#reporting-vulnerabilities","title":"Reporting Vulnerabilities","text":"<p>If you find a security flaw (e.g., sandbox bypass), please DO NOT open a public Issue.</p> <p>Report confidentially to: lethanconsultoria@gmail.com</p>"}]}